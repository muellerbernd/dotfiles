env = NIXOS_OZONE_WL,1
env = MOZ_ENABLE_WAYLAND,1
env = MOZ_WAYLAND,1

# needed by qt5ct
# allow qt to use the xcb plugin instead if wayland is not available
env = _JAVA_AWT_WM_NONREPARENTING,1

# qt vars
env = QT_AUTO_SCREEN_SCALE_FACTOR,1 # (From the Qt documentation) enables automatic scaling, based on the monitor’s pixel density
env = QT_QPA_PLATFORMTHEME,qt5ct # Tells Qt based applications to pick your theme from qt5ct, use with Kvantum.
env = QT_QPA_PLATFORM,wayland;xcb # Qt: Use wayland if available, fall back to x11 if not.
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1 # Disables window decorations on Qt applications

# toolkit backend vars
# env = GDK_BACKEND,wayland,x11 # GTK: Use wayland if available, fall back to x11 if not
# env = SDL_VIDEODRIVER,wayland,x11 # Run SDL2 applications on Wayland. Remove or set to x11 if games that provide older versions of SDL cause compatibility issues
# env = CLUTTER_BACKEND,wayland # Clutter package already has wayland enabled, this variable will force Clutter applications to try and use the Wayland backend

# xdg specifications
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland

env = WLR_DRM_NO_ATOMIC,1


# env=MOZ_ENABLE_WAYLAND,1
# env = HYPRLAND_LOG_WLR, 1
# env = _JAVA_AWT_WM_NONREPARENTING, 1
# env = WLR_NO_HARDWARE_CURSORS, 1
# env = GDK_BACKEND, wayland,x11
# #Qt stuff
# env = QT_AUTO_SCREEN_SCALE_FACTOR,1
# env = QT_QPA_PLATFORM,wayland;xcb
# env = QT_QPA_PLATFORMTHEME,qt5ct
# env=NIXOS_OZONE_WL,1
# env = XDG_CURRENT_DESKTOP,Hyprland

#
# █▀▀ ▀▄▀ █▀▀ █▀▀
# ██▄ █░█ ██▄ █▄▄

# common setup
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
# exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = gnome-keyring-daemon --start --components=ssh,secrets,pkcs11
# exec-once = lxpolkit
exec-once = ~/.config/hypr/scripts/xdgAtomic.sh

# start waybar
exec-once = waybar
# exec-once=~/.config/waybar/waybar-launch.sh

# exec = pkill kanshi; exec kanshi

# exec-once = ~/.config/hypr/scripts/monitors.sh listen
# exec= ~/.config/hypr/scripts/monitors.sh configure_monitors

exec-once=nm-applet --indicator
exec-once=sleep 6 && nextcloud
exec-once=blueman-applet
exec-once=dunst
exec-once=xbindkeys
exec-once=~/scripts/check-dotfiles.sh
# exec-once=~/.config/hypr/scripts/idle.sh

# $idle=swayidle -w timeout 600 ~/.config/hypr/scripts/lock.sh timeout 300 "hyprctl dispatch dpms off" resume "hyprctl dispatch dpms on"
$idle = ~/.config/hypr/scripts/idle.sh

exec-once = $idle

exec-once = sway-audio-idle-inhibit
# exec-once = hyprpaper
exec-once = swaybg -m fill -i ~/wallpapers/aot.jpg

# kanshi
exec-once = kanshi
exec = kanshictl reload

# start on workspace 1
exec-once = hyprctl dispatch workspace -- 1

# █▀▄▀█ █▀█ █▄░█ █ ▀█▀ █▀█ █▀█
# █░▀░█ █▄█ █░▀█ █ ░█░ █▄█ █▀▄
# monitor=monitor=,preferred,auto,1

$locker=~/.config/hypr/scripts/lock.sh
# $menu=sh -c 'rofi -modi "window,run,drun,combi" -combi-modi "window#drun#run" -show combi -lines 20 -show-icons'
$menu=rofi-script

$movemouse=sh -c 'eval `xdotool getactivewindow getwindowgeometry --shell`; xdotool mousemove $((X+WIDTH-80)) $((Y+120))'
# $terminal=wezterm
$terminal=alacritty

#
$mod=SUPER

bezier=mycurve,.32,.97,.53,.98
bezier=easeInOut,.5,0,.5,1
bezier=overshot,.32,.97,.37,1.16
bezier=easeInOut,.5,0,.5,1

animations {
  animation=windowsMove,1,4,overshot
  animation=windowsIn,1,3,mycurve
  animation=windowsOut,1,10,mycurve,slide
  animation=fadeIn,1,3,mycurve
  animation=fadeOut,1,3,mycurve
  animation=border,1,5,mycurve
  animation=workspaces,1,3,default,slide
  enabled=1
}

binds {
  allow_workspace_cycles=1
  workspace_back_and_forth=0
}

decoration {
  blur {
    enabled=0
    contrast=1.000000
    ignore_opacity=1
    new_optimizations=1
    noise=0.030000
    passes=4
    size=4
    xray=1
  }
  # col.shadow=rgba(00000044)
  drop_shadow=0
  # rounding=0
  # shadow_offset=0 0
  # shadow_range=20
  # shadow_render_power=2
}

dwindle {
# move left does not work when default_split_ratio is set
# see https://github.com/hyprwm/Hyprland/issues/4366
  # default_split_ratio=1.300000
  force_split=2
  preserve_split=1
  pseudotile=1
  no_gaps_when_only=true
}

master {
  always_center_master=false
  mfact=0.600000
  no_gaps_when_only=true
  orientation=left
}

general {
  allow_tearing=false
  border_size=1
  gaps_in=1
  gaps_out=4
  layout=dwindle
  # layout=master
  sensitivity=0.200000
}

input {
  touchpad {
    natural_scroll=true
    disable_while_typing = no
  }
  follow_mouse=1
  # force_no_accel=1
  kb_layout=de
  # repeat_delay=200
  # repeat_rate=40
  accel_profile=adaptive
  sensitivity=0.8
}

misc {
  animate_manual_resizes=false
  force_default_wallpaper=0
  disable_hyprland_logo = true
  vfr=true
}

$myMoveSize = 300
$myMove = ~/.config/hypr/scripts/move-window.sh $myMoveSize
$move-window-or-focus = ~/.config/hypr/scripts/move-window-or-focus.sh

# █▄▀ █▀▀ █▄█ █▄▄ █ █▄░█ █▀▄
# █░█ ██▄ ░█░ █▄█ █ █░▀█ █▄▀

bind=$mod SHIFT,Q,killactive
bind=$mod,Period,exec,dunstctl close
bind=$mod, RETURN, exec, $terminal
bind=$mod SHIFT, C, exec, hyprctl reload
bind=$mod, Q, exec, $terminal
bind=$mod, P, pseudo
bind=$mod, T, togglesplit
bind=$mod, D, exec, $menu
bind=$mod, Escape, exec, $locker
bind=$mod SHIFT, E, exec, sh ~/scripts/check-dotfiles.sh && ~/.config/rofi/scripts/powermenu/run.sh
bind=$mod, Space, togglefloating
# scratchpad
bind=$mod, Minus, togglespecialworkspace, magic
bind=$mod SHIFT, Minus, movetoworkspacesilent, special:magic
# pin window
bind=$mod SHIFT, P, pin

# center window
bind=$mod, C, centerwindow

# fullscreen
bind=$mod,F,fullscreen,1

bind=$mod,Down,movefocus,d
bind=$mod,Up,movefocus,u
bind=$mod,Left,exec,$move-window-or-focus focus l
bind=$mod,Right,exec,$move-window-or-focus focus r

bind=$mod SHIFT, Down, exec, $move-window-or-focus move d
bind=$mod SHIFT, Up, exec, $move-window-or-focus move u
bind=$mod SHIFT, Left, exec, $move-window-or-focus move l
bind=$mod SHIFT, Right, exec, $move-window-or-focus move r
# bind=$mod SHIFT,Left,movewindoworgroup,l
# bind=$mod SHIFT,Right,movewindoworgroup,r

# bind = $mod SHIFT, Left, exec, $myMove l
# bind = $mod SHIFT, Right, exec, $myMove r
# bind = $mod SHIFT, Up, exec, $myMove u
# bind = $mod SHIFT, Down, exec, $myMove d
# bind=$mod SHIFT,Left,swapwindow,l
# bind=$mod SHIFT,Down,swapwindow,d
# bind=$mod SHIFT,Up,swapwindow,u
# bind=$mod SHIFT,Right,swapwindow,r
bind=$mod ALT,Left,movewindow,l
bind=$mod ALT,Down,movewindow,d
bind=$mod ALT,Up,movewindow,u
bind=$mod ALT,Right,movewindow,r

bind = $mod,J, cyclenext
bind = $mod,K, cyclenext, prev

bind = $mod SHIFT, n, workspace, empty

bind=$mod,1,workspace,1
bind=$mod,2,workspace,2
bind=$mod,3,workspace,3
bind=$mod,4,workspace,4
bind=$mod,5,workspace,5
bind=$mod,6,workspace,6
bind=$mod,7,workspace,7
bind=$mod,8,workspace,8
bind=$mod,9,workspace,9
bind=$mod,0,workspace,10

bind=$mod SHIFT,1,movetoworkspace,1
bind=$mod SHIFT,2,movetoworkspace,2
bind=$mod SHIFT,3,movetoworkspace,3
bind=$mod SHIFT,4,movetoworkspace,4
bind=$mod SHIFT,5,movetoworkspace,5
bind=$mod SHIFT,6,movetoworkspace,6
bind=$mod SHIFT,7,movetoworkspace,7
bind=$mod SHIFT,8,movetoworkspace,8
bind=$mod SHIFT,9,movetoworkspace,9
bind=$mod SHIFT,0,movetoworkspace,10

# ▀█▀ ▄▀█ █▄▄ █▄▄ █▀▀ █▀▄
# ░█░ █▀█ █▄█ █▄█ ██▄ █▄▀
bind= SUPER, g, togglegroup,
bind=$mod,tab,changegroupactive,f
bind=$mod SHIFT,tab,changegroupactive,b
# bind= SUPER, tab, changegroupactive,

# █▀▄▀█ █░█ █░░ ▀█▀ █ █▀▄▀█ █▀▀ █▀▄ █ ▄▀█
# █░▀░█ █▄█ █▄▄ ░█░ █ █░▀░█ ██▄ █▄▀ █ █▀█
binde=,XF86AudioRaiseVolume,exec,~/scripts/controlVolumePipewire.py up
binde=,XF86AudioLowerVolume,exec,~/scripts/controlVolumePipewire.py down
binde=,XF86AudioMute,exec,exec,~/scripts/controlVolumePipewire.py mute
binde=,XF86MonBrightnessUp,exec,light -A 1 && sh ~/scripts/notifyBrightness.sh
binde=,XF86MonBrightnessDown,exec,light -U 1 && sh ~/scripts/notifyBrightness.sh
bind=,XF86AudioMicMute,exec,wpctl set-mute @DEFAULT_SOURCE@ toggle
# spotify related
bind=,XF86AudioPlay,exec,sh ~/scripts/playPauseToggle.sh
bind=,XF86AudioPrev,exec,sh ~/scripts/playNextOrPrevious.sh prev
bind=,XF86AudioNext,exec,sh ~/scripts/playNextOrPrevious.sh next
bind=$mod SHIFT,P,exec, sh ~/scripts/playPauseToggle.sh
bind=$mod Shift,Prior,exec, sh ~/scripts/playNextOrPrevious.sh prev
bind=$mod Shift,Next,exec, sh ~/scripts/playNextOrPrevious.sh next
bind=$mod Shift,Comma,exec, ~/scripts/rofi-music.sh

# notifyCaps
bindr=CAPS,Caps_Lock,exec,~/scripts/notifyCaps.sh

# toggleKeyboard
bindr=,XF86PowerOff,exec,~/.config/hypr/scripts/toggleKeyboard.sh

# █▀█ █▀▀ █▀ █ ▀█ █▀▀
# █▀▄ ██▄ ▄█ █ █▄ ██▄
# will switch to a submap called resize
bind=$mod,R,submap,resize
# will start a submap called "resize"
submap=resize
# sets repeatable binds for resizing the active window
binde=,right,resizeactive,10 0
binde=,left,resizeactive,-10 0
binde=,up,resizeactive,0 -10
binde=,down,resizeactive,0 10
# use reset to go back to the global submap
bind=,escape,submap,reset
# will reset the submap, meaning end the current one and return to the global one
submap=reset

bind=$mod,Comma,submap,gammastep
submap=gammastep
binde=,i,exec, gammastep -P -O 4600
binde=,u,exec,gammastep -x
bind=,escape,submap,reset
# will reset the submap, meaning end the current one and return to the global one
submap=reset

# mouse
bindm=$mod,mouse:272,movewindow
bindm=$mod,mouse:273,resizewindow
# Scroll through existing workspaces with mainMod + scroll
bind = $mod, mouse_down, workspace, e+1
bind = $mod, mouse_up, workspace, e-1

bind = $mod ALT, U, workspace, e+1
bind = $mod ALT, D, workspace, e-1

# █░█░█ █ █▄░█ █▀▄ █▀█ █░█░█   █▀█ █░█ █░░ █▀▀ █▀
# ▀▄▀▄▀ █ █░▀█ █▄▀ █▄█ ▀▄▀▄▀   █▀▄ █▄█ █▄▄ ██▄ ▄█
windowrule = float, file_progress
windowrule = float, confirm
windowrule = float, dialog
windowrule = float, download
windowrule = float, error
windowrule = float, splash
windowrule = float, confirmreset
windowrule = float, title:Open File
windowrule = center, title:Open File
windowrule = float, title:branchdialog
windowrule = float, Lxappearance
windowrule = float,feh
windowrule = float, pavucontrol
windowrule = center, pavucontrol
windowrule = float, cinny
windowrule = center, cinny
windowrule = float, nheko
windowrule = center, nheko
windowrule = float, file-roller
windowrule = idleinhibit focus, mpv
windowrule = idleinhibit fullscreen, firefox
windowrule = float, title:^(Media viewer)$
windowrule = float, title:^(Spotify)(.*)$
windowrule = float, title:^(Volume Control)$
windowrule = float, title:^(Picture-in-Picture)$
# windowrule = size 800 600, title:^(Volume Control)$
# windowrule = move 75 44%, title:^(Volume Control)$
windowrule = float, nm-openconnect-auth-dialog
windowrule = center, nm-openconnect-auth-dialog
windowrule = minsize 800 650, nm-openconnect-auth-dialog
# rofi should always be centered
windowrule = float, Rofi
windowrule = center, Rofi
windowrule = animation none, Rofi

# flameshot
windowrulev2=move 0 0,title:^(flameshot)
windowrulev2=nofullscreenrequest,title:^(flameshot)

#
windowrule=float,class: firefox,title:^(Extension)(.*)$
windowrule=nofullscreenrequest,class: firefox,title:^(Extension)(.*)$

# vim: set ts=2 sw=2
