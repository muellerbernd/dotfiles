%%%%%%%%%%%%%color
\usepackage{xcolor}
% \definecolor{themebg}{HTML}{3E2C00} % UBC Blue (primary)
\definecolor{UBCgrey}{rgb}{0.3686, 0.5255, 0.6235} % UBC Grey (secondary)

\definecolor{default-linkcolor}{HTML}{A50000}
\definecolor{default-filecolor}{HTML}{A50000}
\definecolor{default-citecolor}{HTML}{4077C0}
\definecolor{default-urlcolor}{HTML}{4077C0}
\definecolor{default-codebgcolor}{HTML}{F0F0F0}

\setbeamercolor{palette primary}{bg=themebg,fg=white}
\setbeamercolor{palette secondary}{bg=themebg,fg=white}
\setbeamercolor{palette tertiary}{bg=themebg,fg=white}
\setbeamercolor{palette quaternary}{bg=themebg,fg=white}
\setbeamercolor{structure}{fg=structurecolor} % itemize, enumerate, etc
\setbeamercolor{section in toc}{fg=themebg} % TOC sections
\setbeamercolor{section title}{fg=themebg}

%% change circle miniframes color
% \setbeamercolor{mini frame}{fg=defaultspecial, bg=themebg}

%% Change subsection in footer color (author and institute color)
% \setbeamercolor{subsection in head/foot}{bg=UBCgrey,fg=white}
% \setbeamercolor{section in head/foot}{bg=themebg,fg=white}

%change section dot color
% \setbeamercolor{section in head/foot}{bg=themebg}

%% Change the circle in miniframes to a box
%\setbeamertemplate{mini frame}[box]
%\setbeamertemplate{mini frame in current subsection}[box]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Create framenumber in footer
\newcommand{\frameofframes}{/}
\newcommand{\setframeofframes}[1]{\renewcommand{\frameofframes}{#1}}

\setframeofframes{of}
\makeatletter
\defbeamertemplate*{title page}{customized}[1][]
{
    \usebeamerfont{title}\inserttitle\par
    \usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par
    \bigskip
    \usebeamerfont{author}\insertauthor\par
    \usebeamerfont{institute}\insertinstitute\par
    \usebeamerfont{date}\insertdate\par
    % % Logo only on title page
    \ifx\inserttitlegraphic\@empty\else{
            \begin{center}
                \resizebox{.5\hsize}{!}{\usebeamercolor[fg]{titlegraphic}\inserttitlegraphic}
            \end{center}
        }\fi

}

\setbeamertemplate{footline}
{%
    \begin{beamercolorbox}[colsep=1.5pt]{upper separation line foot}
    \end{beamercolorbox}
    % \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
    %         leftskip=.3cm,rightskip=.3cm plus1fil]{author in head/foot}%
    %     \leavevmode{\usebeamerfont{author in head/foot}\insertshortauthor}%
    %     \hfill%
    %     {\usebeamerfont{institute in head/foot}\usebeamercolor[fg]{institute in head/foot}\insertshortinstitute}%
    % \end{beamercolorbox}%
    \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
            leftskip=.3cm,rightskip=.3cm plus1fil]{title in head/foot}%
        {\usebeamerfont{title in head/foot}\insertshorttitle}%
        \hfill%
        {\usebeamerfont{frame number}\usebeamercolor[numbercolor]{frame number}\insertframenumber~\frameofframes~\inserttotalframenumber}
    \end{beamercolorbox}%
    \begin{beamercolorbox}[colsep=1.5pt]{lower separation line foot}
    \end{beamercolorbox}
}
\setbeamertemplate{footline}[miniframes theme no subsection]
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Remove subsection bar in mini frames
\defbeamertemplate*{headline}{miniframes theme no subsection}
{%
    % \ifnum \theframenumber=1
    %     % This is the title frame, do nothing
    %
    % \else
    \begin{beamercolorbox}[colsep=1.5pt]{upper separation line head}
    \end{beamercolorbox}
    \begin{beamercolorbox}{section in head/foot}
        \vskip2pt\insertnavigation{\paperwidth}\vskip2pt
    \end{beamercolorbox}%
    \begin{beamercolorbox}[colsep=1.5pt]{lower separation line head}
    \end{beamercolorbox}
    % \fi
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatother
